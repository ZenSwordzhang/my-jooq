#!/usr/bin/bash

# shell声明一个数组
declare -a container_names
i=0
# 生成要检查的容器名
for port in $(seq 7000 7005);
do
  container_names[i]="|redis-${port}"
  i+=1
done

# 数组转换成字符串，疑问：每个元素后面为什么会带空格？
names_str="${container_names[*]}"
echo "names_str: $names_str"

# 去掉首位的"|"，
grep_space="${names_str:1}"
echo "grep_space: $grep_space"
# 去掉字符串中的空格
grep_str="${grep_space//' '/''}"

echo "grep_str: $grep_str"
grep_order="grep -E $grep_str"
echo "grep_order: $grep_order"
# 把命令拼接在一起
docker ps -a | $grep_order

# 或匹配 注：“|”两边的空格也是匹配内容
# docker ps -a | egrep "redis-7000|redis-7001|redis-7002|redis-7003|redis-7004|redis-7005"  # 已弃用
#docker ps -a | grep -E "redis-7000| redis-7001| redis-7002| redis-7003| redis-7004| redis-7005"
# 注意内容首尾的斜杠“/”
#docker ps -a | awk "/redis-7000| redis-7001| redis-7002| redis-7003| redis-7004| redis-7005/"